{"version":3,"file":"index.js","sources":["../src/js/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst button = document.querySelector('#button');\nconst input = document.querySelector('#input');\nconst gallery = document.querySelector('.gallery');\nconst API_KEY = '49258483-ada97ff0ca07db67d4b766dd0';\nconst loader = document.querySelector('.loader');\nconst loadButton = document.querySelector('#load-button');\nlet rect = gallery.getBoundingClientRect();\n\nlet page = 1;\nlet previousQuery = '';\nlet lightbox;\nlet totalImagesFetched = 0;\n\nbutton.addEventListener('click', async () => {\n  const query = input.value.trim();\n  if (query === '') return;\n\n  loader.style.display = 'block';\n\n  if (query !== previousQuery) {\n    page = 1;\n    totalImagesFetched = 0;\n    gallery.innerHTML = '';\n  }\n\n  previousQuery = query;\n\n  await fetchImages();\n});\n\nloadButton.addEventListener('click', async () => {\n  loader.style.display = 'inline-block';\n  page++;\n  await fetchImages();\n  window.scrollBy({\n    top: rect.top * 7.3,\n    behavior: 'smooth',\n  });\n});\n\nasync function fetchImages() {\n  const URL = `https://pixabay.com/api/?key=${API_KEY}&q=${encodeURIComponent(\n    previousQuery\n  )}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${page}`;\n\n  try {\n    const { data } = await axios.get(URL);\n    loader.style.display = 'none';\n\n    if (data.hits.length === 0) {\n      throw new Error('Sorry, no images found! Please try another query.');\n    }\n\n    totalImagesFetched += data.hits.length;\n\n    if (totalImagesFetched >= data.totalHits) {\n      loadButton.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results\",\n        position: 'topRight',\n        timeout: 3000,\n      });\n    } else {\n      loadButton.style.display = 'inline-block';\n    }\n\n    const insertHTML = data.hits\n      .map(\n        image => `\n        <li class=\"gallery-item\">\n          <div class=\"photo-cards\">\n            <ul class=\"photo-information\">\n              <li class=\"photo-information-list\"><b>Likes:</b> ${image.likes}</li>\n              <li class=\"photo-information-list\"><b>Views:</b> ${image.views}</li>\n              <li class=\"photo-information-list\"><b>Comments:</b> ${image.comments}</li>\n              <li class=\"photo-information-list\"><b>Downloads:</b> ${image.downloads}</li>\n            </ul>\n          </div>\n          <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${image.webformatURL}\" \n                 data-source=\"${image.largeImageURL}\" alt=\"${image.tags}\" />\n          </a>\n        </li>`\n      )\n      .join('');\n\n    gallery.insertAdjacentHTML('beforeend', insertHTML);\n    input.value = '';\n\n    if (!lightbox) {\n      lightbox = new SimpleLightbox('.gallery a', {\n        captionDelay: 250,\n        captionsData: 'alt',\n      });\n    } else {\n      lightbox.refresh();\n    }\n\n    if (totalImagesFetched >= data.totalHits) {\n      loadButton.style.display = 'none';\n    } else {\n      loadButton.style.display = 'inline-block';\n    }\n  } catch (error) {\n    loader.style.display = 'none';\n    iziToast.error({\n      title: 'Error',\n      message: error.response?.data?.message || error.message,\n      position: 'topRight',\n      timeout: 5000,\n    });\n  }\n}\n"],"names":["button","input","gallery","API_KEY","loader","loadButton","rect","page","previousQuery","lightbox","totalImagesFetched","query","fetchImages","URL","data","axios","iziToast","insertHTML","image","SimpleLightbox","error","_b","_a"],"mappings":"owBAMA,MAAMA,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAQ,SAAS,cAAc,QAAQ,EACvCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,qCACVC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,cAAc,EACxD,IAAIC,EAAOJ,EAAQ,wBAEfK,EAAO,EACPC,EAAgB,GAChBC,EACAC,EAAqB,EAEzBV,EAAO,iBAAiB,QAAS,SAAY,CAC3C,MAAMW,EAAQV,EAAM,MAAM,KAAI,EAC1BU,IAAU,KAEdP,EAAO,MAAM,QAAU,QAEnBO,IAAUH,IACZD,EAAO,EACPG,EAAqB,EACrBR,EAAQ,UAAY,IAGtBM,EAAgBG,EAEhB,MAAMC,EAAW,EACnB,CAAC,EAEDP,EAAW,iBAAiB,QAAS,SAAY,CAC/CD,EAAO,MAAM,QAAU,eACvBG,IACA,MAAMK,EAAW,EACjB,OAAO,SAAS,CACd,IAAKN,EAAK,IAAM,IAChB,SAAU,QACd,CAAG,CACH,CAAC,EAED,eAAeM,GAAc,SAC3B,MAAMC,EAAM,gCAAgCV,CAAO,MAAM,mBACvDK,CACJ,CAAG,6EAA6ED,CAAI,GAElF,GAAI,CACF,KAAM,CAAE,KAAAO,CAAI,EAAK,MAAMC,EAAM,IAAIF,CAAG,EAGpC,GAFAT,EAAO,MAAM,QAAU,OAEnBU,EAAK,KAAK,SAAW,EACvB,MAAM,IAAI,MAAM,mDAAmD,EAGrEJ,GAAsBI,EAAK,KAAK,OAE5BJ,GAAsBI,EAAK,WAC7BT,EAAW,MAAM,QAAU,OAC3BW,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACT,SAAU,WACV,QAAS,GACjB,CAAO,GAEDX,EAAW,MAAM,QAAU,eAG7B,MAAMY,EAAaH,EAAK,KACrB,IACCI,GAAS;AAAA;AAAA;AAAA;AAAA,iEAIgDA,EAAM,KAAK;AAAA,iEACXA,EAAM,KAAK;AAAA,oEACRA,EAAM,QAAQ;AAAA,qEACbA,EAAM,SAAS;AAAA;AAAA;AAAA,0CAG1CA,EAAM,aAAa;AAAA,8CACfA,EAAM,YAAY;AAAA,gCAChCA,EAAM,aAAa,UAAUA,EAAM,IAAI;AAAA;AAAA,cAGhE,EACA,KAAK,EAAE,EAEVhB,EAAQ,mBAAmB,YAAae,CAAU,EAClDhB,EAAM,MAAQ,GAETQ,EAMHA,EAAS,QAAO,EALhBA,EAAW,IAAIU,EAAe,aAAc,CAC1C,aAAc,IACd,aAAc,KACtB,CAAO,EAKCT,GAAsBI,EAAK,UAC7BT,EAAW,MAAM,QAAU,OAE3BA,EAAW,MAAM,QAAU,cAE9B,OAAQe,EAAO,CACdhB,EAAO,MAAM,QAAU,OACvBY,EAAS,MAAM,CACb,MAAO,QACP,UAASK,GAAAC,EAAAF,EAAM,WAAN,YAAAE,EAAgB,OAAhB,YAAAD,EAAsB,UAAWD,EAAM,QAChD,SAAU,WACV,QAAS,GACf,CAAK,CACF,CACH"}