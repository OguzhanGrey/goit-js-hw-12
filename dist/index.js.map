{"version":3,"file":"index.js","sources":["../src/js/main.js"],"sourcesContent":["import axios from 'axios';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\nimport SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\n\r\nconst button = document.querySelector('#button');\r\nconst input = document.querySelector('#input');\r\nconst gallery = document.querySelector('.gallery');\r\nconst API_KEY = '49258483-ada97ff0ca07db67d4b766dd0';\r\nconst loader = document.querySelector('.loader');\r\nconst loadButton = document.querySelector('#load-button');\r\nlet rect = gallery.getBoundingClientRect();\r\n\r\nlet page = 1;\r\nlet previousQuery = '';\r\nlet lightbox;\r\nlet totalImagesFetched = 0;\r\n\r\nbutton.addEventListener('click', async () => {\r\n  const query = input.value.trim();\r\n  if (query === '') return;\r\n\r\n  loader.style.display = 'block';\r\n\r\n  if (query !== previousQuery) {\r\n    page = 1;\r\n    totalImagesFetched = 0;\r\n    gallery.innerHTML = '';\r\n  }\r\n\r\n  previousQuery = query;\r\n\r\n  await fetchImages();\r\n});\r\n\r\nloadButton.addEventListener('click', async () => {\r\n  loader.style.display = 'inline-block';\r\n  page++;\r\n  await fetchImages();\r\n  window.scrollBy({\r\n    top: rect.top * 7.3,\r\n    behavior: 'smooth',\r\n  });\r\n});\r\n\r\nasync function fetchImages() {\r\n  const URL = `https://pixabay.com/api/?key=${API_KEY}&q=${encodeURIComponent(\r\n    previousQuery\r\n  )}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${page}`;\r\n\r\n  try {\r\n    const { data } = await axios.get(URL);\r\n    loader.style.display = 'none';\r\n\r\n    if (data.hits.length === 0) {\r\n      throw new Error('Sorry, no images found! Please try another query.');\r\n    }\r\n\r\n    totalImagesFetched += data.hits.length;\r\n\r\n    if (totalImagesFetched >= data.totalHits) {\r\n      loadButton.style.display = 'none';\r\n      iziToast.info({\r\n        title: 'Info',\r\n        message: \"We're sorry, but you've reached the end of search results\",\r\n        position: 'topRight',\r\n        timeout: 3000,\r\n      });\r\n    } else {\r\n      loadButton.style.display = 'inline-block';\r\n    }\r\n\r\n    const insertHTML = data.hits\r\n      .map(\r\n        image => `\r\n        <li class=\"gallery-item\">\r\n          <div class=\"photo-cards\">\r\n            <ul class=\"photo-information\">\r\n              <li class=\"photo-information-list\"><b>Likes:</b> ${image.likes}</li>\r\n              <li class=\"photo-information-list\"><b>Views:</b> ${image.views}</li>\r\n              <li class=\"photo-information-list\"><b>Comments:</b> ${image.comments}</li>\r\n              <li class=\"photo-information-list\"><b>Downloads:</b> ${image.downloads}</li>\r\n            </ul>\r\n          </div>\r\n          <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\r\n            <img class=\"gallery-image\" src=\"${image.webformatURL}\" \r\n                 data-source=\"${image.largeImageURL}\" alt=\"${image.tags}\" />\r\n          </a>\r\n        </li>`\r\n      )\r\n      .join('');\r\n\r\n    gallery.insertAdjacentHTML('beforeend', insertHTML);\r\n    input.value = '';\r\n\r\n    if (!lightbox) {\r\n      lightbox = new SimpleLightbox('.gallery a', {\r\n        captionDelay: 250,\r\n        captionsData: 'alt',\r\n      });\r\n    } else {\r\n      lightbox.refresh();\r\n    }\r\n\r\n    if (totalImagesFetched >= data.totalHits) {\r\n      loadButton.style.display = 'none';\r\n    } else {\r\n      loadButton.style.display = 'inline-block';\r\n    }\r\n  } catch (error) {\r\n    loader.style.display = 'none';\r\n    iziToast.error({\r\n      title: 'Error',\r\n      message: error.response?.data?.message || error.message,\r\n      position: 'topRight',\r\n      timeout: 5000,\r\n    });\r\n  }\r\n}\r\n"],"names":["button","input","gallery","API_KEY","loader","loadButton","rect","page","previousQuery","lightbox","totalImagesFetched","query","fetchImages","URL","data","axios","iziToast","insertHTML","image","SimpleLightbox","error","_b","_a"],"mappings":"owBAMA,MAAMA,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAQ,SAAS,cAAc,QAAQ,EACvCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,qCACVC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,cAAc,EACxD,IAAIC,EAAOJ,EAAQ,wBAEfK,EAAO,EACPC,EAAgB,GAChBC,EACAC,EAAqB,EAEzBV,EAAO,iBAAiB,QAAS,SAAY,CAC3C,MAAMW,EAAQV,EAAM,MAAM,KAAI,EAC1BU,IAAU,KAEdP,EAAO,MAAM,QAAU,QAEnBO,IAAUH,IACZD,EAAO,EACPG,EAAqB,EACrBR,EAAQ,UAAY,IAGtBM,EAAgBG,EAEhB,MAAMC,EAAW,EACnB,CAAC,EAEDP,EAAW,iBAAiB,QAAS,SAAY,CAC/CD,EAAO,MAAM,QAAU,eACvBG,IACA,MAAMK,EAAW,EACjB,OAAO,SAAS,CACd,IAAKN,EAAK,IAAM,IAChB,SAAU,QACd,CAAG,CACH,CAAC,EAED,eAAeM,GAAc,SAC3B,MAAMC,EAAM,gCAAgCV,CAAO,MAAM,mBACvDK,CACJ,CAAG,6EAA6ED,CAAI,GAElF,GAAI,CACF,KAAM,CAAE,KAAAO,CAAI,EAAK,MAAMC,EAAM,IAAIF,CAAG,EAGpC,GAFAT,EAAO,MAAM,QAAU,OAEnBU,EAAK,KAAK,SAAW,EACvB,MAAM,IAAI,MAAM,mDAAmD,EAGrEJ,GAAsBI,EAAK,KAAK,OAE5BJ,GAAsBI,EAAK,WAC7BT,EAAW,MAAM,QAAU,OAC3BW,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACT,SAAU,WACV,QAAS,GACjB,CAAO,GAEDX,EAAW,MAAM,QAAU,eAG7B,MAAMY,EAAaH,EAAK,KACrB,IACCI,GAAS;AAAA;AAAA;AAAA;AAAA,iEAIgDA,EAAM,KAAK;AAAA,iEACXA,EAAM,KAAK;AAAA,oEACRA,EAAM,QAAQ;AAAA,qEACbA,EAAM,SAAS;AAAA;AAAA;AAAA,0CAG1CA,EAAM,aAAa;AAAA,8CACfA,EAAM,YAAY;AAAA,gCAChCA,EAAM,aAAa,UAAUA,EAAM,IAAI;AAAA;AAAA,cAGhE,EACA,KAAK,EAAE,EAEVhB,EAAQ,mBAAmB,YAAae,CAAU,EAClDhB,EAAM,MAAQ,GAETQ,EAMHA,EAAS,QAAO,EALhBA,EAAW,IAAIU,EAAe,aAAc,CAC1C,aAAc,IACd,aAAc,KACtB,CAAO,EAKCT,GAAsBI,EAAK,UAC7BT,EAAW,MAAM,QAAU,OAE3BA,EAAW,MAAM,QAAU,cAE9B,OAAQe,EAAO,CACdhB,EAAO,MAAM,QAAU,OACvBY,EAAS,MAAM,CACb,MAAO,QACP,UAASK,GAAAC,EAAAF,EAAM,WAAN,YAAAE,EAAgB,OAAhB,YAAAD,EAAsB,UAAWD,EAAM,QAChD,SAAU,WACV,QAAS,GACf,CAAK,CACF,CACH"}